<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
    id="report_invoice_document_inh_sale_inh_intecpla"
    inherit_id="account.report_invoice_document"
  >
        <t t-call="web.external_layout" position="attributes">
            <attribute
        name="t-call"
      >intecpla_reports.external_layout_invoice</attribute>
        </t>
        <div class="row" position="replace">
            <div class="row">
                <div class="col-6">
                    <div>
                        <strong t-field="o.company_id.partner_id.name" />
                    </div> VAT: <span t-field="o.company_id.partner_id.vat" />
                    <br />
                    <span t-field="o.company_id.partner_id.street" />
                    <br />
                    <span t-field="o.company_id.partner_id.zip" />
                    <span t-field="o.company_id.partner_id.city" />
                    <span t-esc="o.company_id.partner_id.get_state_name()" />
                    <br />
                    <span t-field="o.company_id.partner_id.country_id.name" />
                    <br />
                    Phone: <span t-field="o.company_id.partner_id.phone" />
                    <br />
                    <span t-field="o.company_id.partner_id.email" />
                    <br />
                    <span t-field="o.company_id.partner_id.website" />
                </div>
                <div class="offset-col-6 col-6">
                    <br />
                    <br />
                    <div>
                        <strong t-field="o.partner_id.name" />
                    </div>
                    <span t-field="o.partner_id.street" />
                    <br />
                    <span t-field="o.partner_id.zip" />
                    <span t-field="o.partner_id.city" />
                    <span t-esc="o.partner_id.get_state_name()" />
                    <br />
                    <span t-field="o.partner_id.country_id.name" />
                </div>
            </div>
        </div>

        <span t-if="o.name != '/'" position="replace" />
        <h2 position="replace" />

        <div name="invoice_date" position="replace">
            <div
        class="col-auto col-3 mw-100 mb-2"
        t-if="o.invoice_date"
        name="invoice_date"
      >
                <strong>Date:</strong>
                <p class="m-0" t-field="o.invoice_date" />
            </div>
        </div>
        <div name="origin" position="replace" />
        <!--
        <div name="reference" position="replace" />
        -->

        <div name="due_date" position="replace">
            <div
        class="col-auto col-3 mw-100 mb-2"
        t-if="o.move_type == 'out_invoice'"
        name="partner_vat"
      >
                <strong>VAT:</strong>
                <p class="m-0" t-field="o.partner_id.vat" />
                <p class="m-0" t-field="o.date_due" t-if="not o.company_id" />
            </div>
            <div name="name" class="col-auto col-3 mw-100 mb-2">
                <strong>Invoice:</strong>
                <p class="m-0" t-field="o.name" />
            </div>

        </div>
        <div name="customer_code" position="replace">
            <div
        class="col-auto col-3 mw-100 mb-2"
        t-if="o.partner_id.ref"
        name="customer_code"
      >
                <strong>Customer:</strong>
                <p class="m-0" t-field="o.partner_id.ref" />
            </div>
        </div>
        <div name="payment_term" position="attributes">
            <attribute
        name="t-if"
      >o.invoice_payment_term_id and o.move_type == 'in_invoice'</attribute>
        </div>
        <xpath expr='//p[@t-field="o.ref"]/..' position="replace" />




        <!-- <div name="payment_term" position="after">
                    <p t-if="o.expiration_dates" name="expiration_dates">
                        <strong>
                            Expiration dates:
                        </strong>
                        <span t-field="o.expiration_dates" />
                    </p>
                </div> -->
        <div id="informations" position="after">
            <div id="informations2" class="row mt32 mb32" t-if="o.invoice_origin">
                <div class="col-auto col-3 mw-100 mb-2" name="origin">
                    <strong>Source:</strong>
                    <p class="m-0" t-field="o.invoice_origin" />
                </div>
            </div>
        </div>
        <xpath
      expr='//table[@name="invoice_line_table"]/thead/tr'
      position="attributes"
    >
            <attribute name="style">border-top: 1px solid black !important;</attribute>
        </xpath>
        <th name="th_description" position="before">
            <th name="th_code" t-if="o.move_type == 'out_invoice'" class="text-start">
                <span>Code</span>
            </th>
        </th>
        <th name="th_taxes" position="replace" />
        <td name="account_invoice_line_name" position="before">
            <td
        name="td_product_code"
        t-if="o.move_type == 'out_invoice'"
        class="text-start"
        style="font-size: 13px;"
      >
                <span t-if="line.product_id.alternative_sales_code">
                    <span t-field="line.product_id.alternative_sales_code" />
                </span>
                <span
          t-if="not line.product_id.alternative_sales_code and line.product_id.default_code"
        >
                    <span t-field="line.product_id.default_code" />
                </span>
            </td>
        </td>
        <xpath expr='//span[@t-field="line.name"]/..' position="attributes">
            <attribute name="t-if">o.move_type != 'out_invoice'</attribute>
            <attribute name="style">font-size: 13px;</attribute>
        </xpath>
        <xpath expr='//span[@t-field="line.name"]/..' position="after">
             <td
        name="account_invoice_line_name2"
        t-if="o.move_type == 'out_invoice'"
        style="font-size: 13px;"
      >
                <span t-if="line.product_id.name2">
                    <span
            t-field="line.product_id.name2"
            t-options="{'widget': 'text'}"
          />
                </span>
                <span t-if="not line.product_id.name2">
                    <span
            t-field="line.product_id.name"
            t-options="{'widget': 'text'}"
          />
                </span>

             </td>
        </xpath>
        <xpath expr='//span[@t-field="line.quantity"]/..' position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
        </xpath>
        <xpath expr='//span[@t-field="line.price_unit"]/..' position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
        </xpath>
        <xpath expr='//span[@t-field="line.discount"]/..' position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
        </xpath>
        <td name="td_taxes" position="replace" />
        <xpath expr='//span[@t-field="line.price_subtotal"]/..' position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
        </xpath>




        <!-- <th name="th_description" position="after">
                    <th name="th_lots" t-if="o.have_lots" class="text-left">
                        <span>Serial numbers</span>
                    </th>
                </th> -->

















        <t t-if="line.display_type == 'line_section'" position="replace">
            <t t-if="line.display_type == 'line_section'">
                <td colspan="99" style="font-size: 13px;">
                    <span t-field="line.name" />
                </td>
                <t t-set="current_section" t-value="line" />
                <t t-set="current_subtotal" t-value="0" />
            </t>
        </t>

        <t t-if="line.display_type == 'line_note'" position="replace">
            <t t-if="line.display_type == 'line_note'">
                <td colspan="99" style="font-size: 13px;">
                    <span t-field="line.name" />
                </td>
            </t>
        </t>

        <tr class="is-subtotal text-end" position="attributes">
        <attribute name="t-if">not current_section.with_sale_order_section</attribute>
        </tr>
    </template>
</odoo>
